<!DOCTYPE html>
<html lang="" xml:lang="">
<head>

  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <title>6.4 Scrape Data from an FTP Site | DEQ R Methods Encyclopedia</title>
  <meta name="description" content="Simple reprex of common tasks DEQ staff encounter and how to complete them with R." />
  <meta name="generator" content="bookdown 0.21 and GitBook 2.6.7" />

  <meta property="og:title" content="6.4 Scrape Data from an FTP Site | DEQ R Methods Encyclopedia" />
  <meta property="og:type" content="book" />
  
  
  <meta property="og:description" content="Simple reprex of common tasks DEQ staff encounter and how to complete them with R." />
  <meta name="github-repo" content="openscapes/series" />

  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content="6.4 Scrape Data from an FTP Site | DEQ R Methods Encyclopedia" />
  
  <meta name="twitter:description" content="Simple reprex of common tasks DEQ staff encounter and how to complete them with R." />
  

<meta name="author" content="DEQ R Development Team" />


<meta name="date" content="2023-02-16" />

  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="black" />
  
  
<link rel="prev" href="accessAPIfromR.html"/>

<script src="libs/header-attrs-2.6/header-attrs.js"></script>
<script src="libs/jquery-2.2.3/jquery.min.js"></script>
<link href="libs/gitbook-2.6.7/css/style.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-table.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-bookdown.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-highlight.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-search.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-fontsettings.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-clipboard.css" rel="stylesheet" />









<script src="libs/htmlwidgets-1.5.1/htmlwidgets.js"></script>
<script src="libs/plotly-binding-4.9.1/plotly.js"></script>
<script src="libs/typedarray-0.1/typedarray.min.js"></script>
<link href="libs/crosstalk-1.0.0/css/crosstalk.css" rel="stylesheet" />
<script src="libs/crosstalk-1.0.0/js/crosstalk.min.js"></script>
<link href="libs/plotly-htmlwidgets-css-1.49.4/plotly-htmlwidgets.css" rel="stylesheet" />
<script src="libs/plotly-main-1.49.4/plotly-latest.min.js"></script>
<link href="libs/datatables-css-0.0.0/datatables-crosstalk.css" rel="stylesheet" />
<script src="libs/datatables-binding-0.13/datatables.js"></script>
<link href="libs/dt-core-1.10.20/css/jquery.dataTables.min.css" rel="stylesheet" />
<link href="libs/dt-core-1.10.20/css/jquery.dataTables.extra.css" rel="stylesheet" />
<script src="libs/dt-core-1.10.20/js/jquery.dataTables.min.js"></script>
<link href="libs/leaflet-1.3.1/leaflet.css" rel="stylesheet" />
<script src="libs/leaflet-1.3.1/leaflet.js"></script>
<link href="libs/leafletfix-1.0.0/leafletfix.css" rel="stylesheet" />
<script src="libs/Proj4Leaflet-1.0.1/proj4-compressed.js"></script>
<script src="libs/Proj4Leaflet-1.0.1/proj4leaflet.js"></script>
<link href="libs/rstudio_leaflet-1.3.1/rstudio_leaflet.css" rel="stylesheet" />
<script src="libs/leaflet-binding-2.0.3/leaflet.js"></script>
<link href="libs/pagedtable-1.1/css/pagedtable.css" rel="stylesheet" />
<script src="libs/pagedtable-1.1/js/pagedtable.js"></script>
<script src="assets/book.js"></script>


<style type="text/css">
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
</style>

<link rel="stylesheet" href="lib/css/bootstrap.min.css" type="text/css" />
<link rel="stylesheet" href="lib/css/style.css" type="text/css" />
<link rel="stylesheet" href="lib/css/lesson.css" type="text/css" />
<link rel="stylesheet" href="assets/style.css" type="text/css" />
</head>

<body>



  <div class="book without-animation with-summary font-size-2 font-family-1" data-basepath=".">

    <div class="book-summary">
      <nav role="navigation">

<ul class="summary">
<li><a href="./">DEQ R Methods Encyclopedia</a></li>

<li class="divider"></li>
<li class="chapter" data-level="1" data-path="index.html"><a href="index.html"><i class="fa fa-check"></i><b>1</b> Background</a>
<ul>
<li class="chapter" data-level="1.1" data-path="whyR.html"><a href="whyR.html"><i class="fa fa-check"></i><b>1.1</b> Why R?</a>
<ul>
<li class="chapter" data-level="1.1.1" data-path="whyR.html"><a href="whyR.html#accessible-open-source-software"><i class="fa fa-check"></i><b>1.1.1</b> Accessible, Open Source Software</a></li>
<li class="chapter" data-level="1.1.2" data-path="whyR.html"><a href="whyR.html#automation-and-reproducibility"><i class="fa fa-check"></i><b>1.1.2</b> Automation and Reproducibility</a></li>
<li class="chapter" data-level="1.1.3" data-path="whyR.html"><a href="whyR.html#r-products"><i class="fa fa-check"></i><b>1.1.3</b> R Products</a></li>
<li class="chapter" data-level="1.1.4" data-path="whyR.html"><a href="whyR.html#summary"><i class="fa fa-check"></i><b>1.1.4</b> Summary</a></li>
</ul></li>
<li class="chapter" data-level="1.2" data-path="gettingStartedWithR.html"><a href="gettingStartedWithR.html"><i class="fa fa-check"></i><b>1.2</b> Getting Started With R</a>
<ul>
<li class="chapter" data-level="1.2.1" data-path="gettingStartedWithR.html"><a href="gettingStartedWithR.html#downloading-r-and-rstudio"><i class="fa fa-check"></i><b>1.2.1</b> Downloading R and RStudio</a></li>
<li class="chapter" data-level="1.2.2" data-path="gettingStartedWithR.html"><a href="gettingStartedWithR.html#configuring-rstudio"><i class="fa fa-check"></i><b>1.2.2</b> Configuring RStudio</a></li>
<li class="chapter" data-level="1.2.3" data-path="gettingStartedWithR.html"><a href="gettingStartedWithR.html#downloading-packages"><i class="fa fa-check"></i><b>1.2.3</b> Downloading Packages</a></li>
<li class="chapter" data-level="1.2.4" data-path="gettingStartedWithR.html"><a href="gettingStartedWithR.html#how-to-learn-or-continue-learning-r"><i class="fa fa-check"></i><b>1.2.4</b> How to Learn (or Continue Learning) R?</a></li>
</ul></li>
<li class="chapter" data-level="1.3" data-path="wantToContribute.html"><a href="wantToContribute.html"><i class="fa fa-check"></i><b>1.3</b> Want to Contribute?</a></li>
</ul></li>
<li class="chapter" data-level="2" data-path="queryInternalDataSources.html"><a href="queryInternalDataSources.html"><i class="fa fa-check"></i><b>2</b> Query Internal Data Sources</a>
<ul>
<li class="chapter" data-level="2.1" data-path="connectToConnectPins.html"><a href="connectToConnectPins.html"><i class="fa fa-check"></i><b>2.1</b> Connecting to R Connect (for Pinned Data)</a>
<ul>
<li class="chapter" data-level="2.1.1" data-path="connectToConnectPins.html"><a href="connectToConnectPins.html#api-keys"><i class="fa fa-check"></i><b>2.1.1</b> API Keys</a></li>
<li class="chapter" data-level="2.1.2" data-path="connectToConnectPins.html"><a href="connectToConnectPins.html#connect-to-the-r-server"><i class="fa fa-check"></i><b>2.1.2</b> Connect to the R server</a></li>
<li class="chapter" data-level="2.1.3" data-path="connectToConnectPins.html"><a href="connectToConnectPins.html#browse-available-pins"><i class="fa fa-check"></i><b>2.1.3</b> Browse Available Pins</a></li>
<li class="chapter" data-level="2.1.4" data-path="connectToConnectPins.html"><a href="connectToConnectPins.html#access-a-pin"><i class="fa fa-check"></i><b>2.1.4</b> Access a Pin</a></li>
<li class="chapter" data-level="2.1.5" data-path="connectToConnectPins.html"><a href="connectToConnectPins.html#query-some-of-a-pin"><i class="fa fa-check"></i><b>2.1.5</b> Query (some of) a Pin</a></li>
</ul></li>
<li class="chapter" data-level="2.2" data-path="connectToODS.html"><a href="connectToODS.html"><i class="fa fa-check"></i><b>2.2</b> Connect to ODS</a>
<ul>
<li class="chapter" data-level="2.2.1" data-path="connectToODS.html"><a href="connectToODS.html#credentials-local-vs-remote"><i class="fa fa-check"></i><b>2.2.1</b> Credentials (Local vs Remote)</a></li>
<li class="chapter" data-level="2.2.2" data-path="connectToODS.html"><a href="connectToODS.html#required-packages"><i class="fa fa-check"></i><b>2.2.2</b> Required Packages</a></li>
<li class="chapter" data-level="2.2.3" data-path="connectToODS.html"><a href="connectToODS.html#dbi-method-for-ods-connection"><i class="fa fa-check"></i><b>2.2.3</b> DBI Method for ODS Connection</a></li>
<li class="chapter" data-level="2.2.4" data-path="connectToODS.html"><a href="connectToODS.html#pool-method-for-ods-connection"><i class="fa fa-check"></i><b>2.2.4</b> Pool Method for ODS Connection</a></li>
<li class="chapter" data-level="2.2.5" data-path="connectToODS.html"><a href="connectToODS.html#pool-method-query-data"><i class="fa fa-check"></i><b>2.2.5</b> Pool Method: Query Data</a></li>
</ul></li>
<li class="chapter" data-level="2.3" data-path="queryDataFromODS.html"><a href="queryDataFromODS.html"><i class="fa fa-check"></i><b>2.3</b> Querying Data from ODS</a>
<ul>
<li class="chapter" data-level="2.3.1" data-path="queryDataFromODS.html"><a href="queryDataFromODS.html#connecting-and-disconnecting-from-a-database"><i class="fa fa-check"></i><b>2.3.1</b> Connecting and Disconnecting from a Database</a></li>
<li class="chapter" data-level="2.3.2" data-path="queryDataFromODS.html"><a href="queryDataFromODS.html#data-schema"><i class="fa fa-check"></i><b>2.3.2</b> Data Schema</a></li>
<li class="chapter" data-level="2.3.3" data-path="queryDataFromODS.html"><a href="queryDataFromODS.html#data-views-interaction"><i class="fa fa-check"></i><b>2.3.3</b> Data Views Interaction</a></li>
<li class="chapter" data-level="2.3.4" data-path="queryDataFromODS.html"><a href="queryDataFromODS.html#data-update-frequency"><i class="fa fa-check"></i><b>2.3.4</b> Data Update Frequency</a></li>
</ul></li>
<li class="chapter" data-level="2.4" data-path="commonWQMqueries.html"><a href="commonWQMqueries.html"><i class="fa fa-check"></i><b>2.4</b> Common WQM queries</a>
<ul>
<li class="chapter" data-level="2.4.1" data-path="commonWQMqueries.html"><a href="commonWQMqueries.html#connect-to-internal-data-resources"><i class="fa fa-check"></i><b>2.4.1</b> Connect to Internal Data Resources</a></li>
<li class="chapter" data-level="2.4.2" data-path="commonWQMqueries.html"><a href="commonWQMqueries.html#query-all-water-monitoring-data-from-a-provided-watershed"><i class="fa fa-check"></i><b>2.4.2</b> Query All Water Monitoring Data from a Provided Watershed</a></li>
</ul></li>
<li class="chapter" data-level="2.5" data-path="commonBenthicqueries.html"><a href="commonBenthicqueries.html"><i class="fa fa-check"></i><b>2.5</b> Common Benthic queries</a></li>
<li class="chapter" data-level="2.6" data-path="commonWQAqueries.html"><a href="commonWQAqueries.html"><i class="fa fa-check"></i><b>2.6</b> Common WQA queries</a></li>
<li class="chapter" data-level="2.7" data-path="commonTMDLqueries.html"><a href="commonTMDLqueries.html"><i class="fa fa-check"></i><b>2.7</b> Common TMDL queries</a></li>
</ul></li>
<li class="chapter" data-level="3" data-path="spatialAnalysis.html"><a href="spatialAnalysis.html"><i class="fa fa-check"></i><b>3</b> Spatial Analysis</a>
<ul>
<li class="chapter" data-level="3.1" data-path="spatialDataFromTabularData.html"><a href="spatialDataFromTabularData.html"><i class="fa fa-check"></i><b>3.1</b> Spatial Data from Tabular Data</a>
<ul>
<li class="chapter" data-level="3.1.1" data-path="spatialDataFromTabularData.html"><a href="spatialDataFromTabularData.html#removing-spatial-information"><i class="fa fa-check"></i><b>3.1.1</b> Removing Spatial Information</a></li>
</ul></li>
<li class="chapter" data-level="3.2" data-path="consumingGISRESTservices.html"><a href="consumingGISRESTservices.html"><i class="fa fa-check"></i><b>3.2</b> Consuming GIS REST Services in R</a>
<ul>
<li class="chapter" data-level="3.2.1" data-path="consumingGISRESTservices.html"><a href="consumingGISRESTservices.html#gis-rest-service-data"><i class="fa fa-check"></i><b>3.2.1</b> GIS Rest Service Data</a></li>
<li class="chapter" data-level="3.2.2" data-path="consumingGISRESTservices.html"><a href="consumingGISRESTservices.html#primary-deq-rest-endpoints"><i class="fa fa-check"></i><b>3.2.2</b> Primary DEQ REST Endpoints:</a></li>
<li class="chapter" data-level="3.2.3" data-path="consumingGISRESTservices.html"><a href="consumingGISRESTservices.html#how-do-you-know-what-fieldscriteria-to-query-on"><i class="fa fa-check"></i><b>3.2.3</b> How do you know what fields/criteria to query on?</a></li>
<li class="chapter" data-level="3.2.4" data-path="consumingGISRESTservices.html"><a href="consumingGISRESTservices.html#okaylets-build-a-simple-query-and-see-it-in-r"><i class="fa fa-check"></i><b>3.2.4</b> Okay…let’s build a simple query and see it in R…</a></li>
<li class="chapter" data-level="3.2.5" data-path="consumingGISRESTservices.html"><a href="consumingGISRESTservices.html#querying-multiple-records"><i class="fa fa-check"></i><b>3.2.5</b> Querying multiple records:</a></li>
<li class="chapter" data-level="3.2.6" data-path="consumingGISRESTservices.html"><a href="consumingGISRESTservices.html#this-works-on-lines-and-polygons-as-well"><i class="fa fa-check"></i><b>3.2.6</b> This works on lines and polygons as well!:</a></li>
<li class="chapter" data-level="3.2.7" data-path="consumingGISRESTservices.html"><a href="consumingGISRESTservices.html#building-more-advanced-queries"><i class="fa fa-check"></i><b>3.2.7</b> Building more advanced queries</a></li>
</ul></li>
<li class="chapter" data-level="3.3" data-path="spatialOperationsGISRESTservices.html"><a href="spatialOperationsGISRESTservices.html"><i class="fa fa-check"></i><b>3.3</b> Spatial Operations on GIS REST Services in R</a>
<ul>
<li class="chapter" data-level="3.3.1" data-path="spatialOperationsGISRESTservices.html"><a href="spatialOperationsGISRESTservices.html#gis-rest-service-data-1"><i class="fa fa-check"></i><b>3.3.1</b> GIS Rest Service Data</a></li>
<li class="chapter" data-level="3.3.2" data-path="spatialOperationsGISRESTservices.html"><a href="spatialOperationsGISRESTservices.html#level-up-your-querying-game"><i class="fa fa-check"></i><b>3.3.2</b> Level Up Your Querying Game</a></li>
<li class="chapter" data-level="3.3.3" data-path="spatialOperationsGISRESTservices.html"><a href="spatialOperationsGISRESTservices.html#set-up-your-environment"><i class="fa fa-check"></i><b>3.3.3</b> Set Up Your Environment</a></li>
<li class="chapter" data-level="3.3.4" data-path="spatialOperationsGISRESTservices.html"><a href="spatialOperationsGISRESTservices.html#query-one-layer"><i class="fa fa-check"></i><b>3.3.4</b> Query One Layer</a></li>
<li class="chapter" data-level="3.3.5" data-path="spatialOperationsGISRESTservices.html"><a href="spatialOperationsGISRESTservices.html#query-layer-two-based-on-information-from-layer-one"><i class="fa fa-check"></i><b>3.3.5</b> Query Layer Two Based On Information From Layer One</a></li>
<li class="chapter" data-level="3.3.6" data-path="spatialOperationsGISRESTservices.html"><a href="spatialOperationsGISRESTservices.html#spatially-intersect-layers"><i class="fa fa-check"></i><b>3.3.6</b> Spatially Intersect Layers</a></li>
</ul></li>
<li class="chapter" data-level="3.4" data-path="usingSpatialDatasets.html"><a href="usingSpatialDatasets.html"><i class="fa fa-check"></i><b>3.4</b> Using Spatial Datasets</a></li>
<li class="chapter" data-level="3.5" data-path="interactiveMapping.html"><a href="interactiveMapping.html"><i class="fa fa-check"></i><b>3.5</b> Interactive Mapping</a></li>
<li class="chapter" data-level="3.6" data-path="watershed-delineation.html"><a href="watershed-delineation.html"><i class="fa fa-check"></i><b>3.6</b> Watershed Delineation</a>
<ul>
<li class="chapter" data-level="3.6.1" data-path="watershed-delineation.html"><a href="watershed-delineation.html#single-station-delineation"><i class="fa fa-check"></i><b>3.6.1</b> Single Station Delineation</a></li>
<li class="chapter" data-level="3.6.2" data-path="watershed-delineation.html"><a href="watershed-delineation.html#multiple-station-delineation"><i class="fa fa-check"></i><b>3.6.2</b> Multiple Station Delineation</a></li>
<li class="chapter" data-level="3.6.3" data-path="watershed-delineation.html"><a href="watershed-delineation.html#qa"><i class="fa fa-check"></i><b>3.6.3</b> QA</a></li>
</ul></li>
<li class="chapter" data-level="3.7" data-path="landcover-analysis.html"><a href="landcover-analysis.html"><i class="fa fa-check"></i><b>3.7</b> Landcover analysis</a></li>
<li class="chapter" data-level="3.8" data-path="spatial-joins.html"><a href="spatial-joins.html"><i class="fa fa-check"></i><b>3.8</b> Spatial joins</a></li>
</ul></li>
<li class="chapter" data-level="4" data-path="shinyAppHelp.html"><a href="shinyAppHelp.html"><i class="fa fa-check"></i><b>4</b> Shiny App Pro Tips</a>
<ul>
<li class="chapter" data-level="4.1" data-path="shiny-file-organization.html"><a href="shiny-file-organization.html"><i class="fa fa-check"></i><b>4.1</b> Shiny file organization</a></li>
<li class="chapter" data-level="4.2" data-path="shiny-tricks.html"><a href="shiny-tricks.html"><i class="fa fa-check"></i><b>4.2</b> Shiny Tricks</a></li>
<li class="chapter" data-level="4.3" data-path="markdown-and-user-friendly-output-files.html"><a href="markdown-and-user-friendly-output-files.html"><i class="fa fa-check"></i><b>4.3</b> Markdown and User-Friendly Output Files</a></li>
</ul></li>
<li class="chapter" data-level="5" data-path="bestPractices.html"><a href="bestPractices.html"><i class="fa fa-check"></i><b>5</b> Best Practices</a>
<ul>
<li class="chapter" data-level="5.1" data-path="versionControl.html"><a href="versionControl.html"><i class="fa fa-check"></i><b>5.1</b> Version Control</a>
<ul>
<li class="chapter" data-level="5.1.1" data-path="versionControl.html"><a href="versionControl.html#what-is-version-control"><i class="fa fa-check"></i><b>5.1.1</b> What is Version Control?</a></li>
<li class="chapter" data-level="5.1.2" data-path="versionControl.html"><a href="versionControl.html#git-basics"><i class="fa fa-check"></i><b>5.1.2</b> Git Basics</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="6" data-path="miscTips.html"><a href="miscTips.html"><i class="fa fa-check"></i><b>6</b> Miscellaeous Tips and Tricks</a>
<ul>
<li class="chapter" data-level="6.1" data-path="regular-expression-and-pattern-matching.html"><a href="regular-expression-and-pattern-matching.html"><i class="fa fa-check"></i><b>6.1</b> Regular expression and pattern matching</a>
<ul>
<li class="chapter" data-level="6.1.1" data-path="regular-expression-and-pattern-matching.html"><a href="regular-expression-and-pattern-matching.html#regexOverview"><i class="fa fa-check"></i><b>6.1.1</b> Example Data Overview</a></li>
<li class="chapter" data-level="6.1.2" data-path="regular-expression-and-pattern-matching.html"><a href="regular-expression-and-pattern-matching.html#regexInR"><i class="fa fa-check"></i><b>6.1.2</b> Common R Commands and How to Use Them</a></li>
<li class="chapter" data-level="6.1.3" data-path="regular-expression-and-pattern-matching.html"><a href="regular-expression-and-pattern-matching.html#regexBasics"><i class="fa fa-check"></i><b>6.1.3</b> Basic Regular Expressions</a></li>
<li class="chapter" data-level="6.1.4" data-path="regular-expression-and-pattern-matching.html"><a href="regular-expression-and-pattern-matching.html#regexCharacters"><i class="fa fa-check"></i><b>6.1.4</b> Character Classes</a></li>
<li class="chapter" data-level="6.1.5" data-path="regular-expression-and-pattern-matching.html"><a href="regular-expression-and-pattern-matching.html#regexQuantifiers"><i class="fa fa-check"></i><b>6.1.5</b> Quantifiers</a></li>
<li class="chapter" data-level="6.1.6" data-path="regular-expression-and-pattern-matching.html"><a href="regular-expression-and-pattern-matching.html#regexAnchors"><i class="fa fa-check"></i><b>6.1.6</b> Anchors</a></li>
<li class="chapter" data-level="6.1.7" data-path="regular-expression-and-pattern-matching.html"><a href="regular-expression-and-pattern-matching.html#regexExamples"><i class="fa fa-check"></i><b>6.1.7</b> Common or Useful Patterns</a></li>
<li class="chapter" data-level="6.1.8" data-path="regular-expression-and-pattern-matching.html"><a href="regular-expression-and-pattern-matching.html#regexResources"><i class="fa fa-check"></i><b>6.1.8</b> Additional Resources</a></li>
</ul></li>
<li class="chapter" data-level="6.2" data-path="non-standard-evaluation.html"><a href="non-standard-evaluation.html"><i class="fa fa-check"></i><b>6.2</b> Non standard evaluation</a></li>
<li class="chapter" data-level="6.3" data-path="accessAPIfromR.html"><a href="accessAPIfromR.html"><i class="fa fa-check"></i><b>6.3</b> Accessing APIs from R</a>
<ul>
<li class="chapter" data-level="6.3.1" data-path="accessAPIfromR.html"><a href="accessAPIfromR.html#what-is-an-api"><i class="fa fa-check"></i><b>6.3.1</b> What is an API</a></li>
<li class="chapter" data-level="6.3.2" data-path="accessAPIfromR.html"><a href="accessAPIfromR.html#CMCuseCase"><i class="fa fa-check"></i><b>6.3.2</b> CMC API Use Case</a></li>
<li class="chapter" data-level="6.3.3" data-path="accessAPIfromR.html"><a href="accessAPIfromR.html#required-packages-1"><i class="fa fa-check"></i><b>6.3.3</b> Required Packages</a></li>
<li class="chapter" data-level="6.3.4" data-path="accessAPIfromR.html"><a href="accessAPIfromR.html#explore-the-endpoint-in-a-browser"><i class="fa fa-check"></i><b>6.3.4</b> Explore the endpoint in a browser</a></li>
<li class="chapter" data-level="6.3.5" data-path="accessAPIfromR.html"><a href="accessAPIfromR.html#query-api-with-r"><i class="fa fa-check"></i><b>6.3.5</b> Query API with R</a></li>
<li class="chapter" data-level="6.3.6" data-path="accessAPIfromR.html"><a href="accessAPIfromR.html#example-query-cmc-api-for-assessment-uses"><i class="fa fa-check"></i><b>6.3.6</b> Example: Query CMC API for Assessment Uses</a></li>
<li class="chapter" data-level="6.3.7" data-path="accessAPIfromR.html"><a href="accessAPIfromR.html#parting-challenge"><i class="fa fa-check"></i><b>6.3.7</b> Parting Challenge</a></li>
</ul></li>
<li class="chapter" data-level="6.4" data-path="scrapeDataFromFTP.html"><a href="scrapeDataFromFTP.html"><i class="fa fa-check"></i><b>6.4</b> Scrape Data from an FTP Site</a>
<ul>
<li class="chapter" data-level="6.4.1" data-path="scrapeDataFromFTP.html"><a href="scrapeDataFromFTP.html#what-is-an-ftp"><i class="fa fa-check"></i><b>6.4.1</b> What is an FTP?</a></li>
<li class="chapter" data-level="6.4.2" data-path="scrapeDataFromFTP.html"><a href="scrapeDataFromFTP.html#tiger-dataset-use-case"><i class="fa fa-check"></i><b>6.4.2</b> TIGER Dataset Use Case</a></li>
<li class="chapter" data-level="6.4.3" data-path="scrapeDataFromFTP.html"><a href="scrapeDataFromFTP.html#required-packages-2"><i class="fa fa-check"></i><b>6.4.3</b> Required Packages</a></li>
<li class="chapter" data-level="6.4.4" data-path="scrapeDataFromFTP.html"><a href="scrapeDataFromFTP.html#build-base-ftp-web-address-call"><i class="fa fa-check"></i><b>6.4.4</b> Build Base FTP Web Address Call</a></li>
<li class="chapter" data-level="6.4.5" data-path="scrapeDataFromFTP.html"><a href="scrapeDataFromFTP.html#custom-tigerroads-ftp-function"><i class="fa fa-check"></i><b>6.4.5</b> Custom TIGERroads FTP function</a></li>
<li class="chapter" data-level="6.4.6" data-path="scrapeDataFromFTP.html"><a href="scrapeDataFromFTP.html#parse-data-into-single-file"><i class="fa fa-check"></i><b>6.4.6</b> Parse Data into Single File</a></li>
</ul></li>
</ul></li>
<li class="divider"></li>
<li><a href="https://bookdown.org" target="blank">Published with bookdown</a></li>

</ul>

      </nav>
    </div>

    <div class="book-body">
      <div class="body-inner">
        <div class="book-header" role="navigation">
          <h1>
            <i class="fa fa-circle-o-notch fa-spin"></i><a href="./">DEQ R Methods Encyclopedia</a>
          </h1>
        </div>

        <div class="page-wrapper" tabindex="-1" role="main">
          <div class="page-inner">

            <section class="normal" id="section-">
<div id="scrapeDataFromFTP" class="section level2" number="6.4">
<h2><span class="header-section-number">6.4</span> Scrape Data from an FTP Site</h2>
<p><strong>Section Contact: Emma Jones (<a href="mailto:emma.jones@deq.virginia.gov" class="email">emma.jones@deq.virginia.gov</a>)</strong></p>
<div id="what-is-an-ftp" class="section level3" number="6.4.1">
<h3><span class="header-section-number">6.4.1</span> What is an FTP?</h3>
<p>File transfer protocol (FTP) is a mechanism for transferring data, usually large amounts of data, over a network connection. Typically, an FTP server (sometimes called the remote host) will host data that users (sometimes called the client or local host) want to source locally. FTP protocols allow the client to connect to the remote server, identify the desired data, and download the data for local use. FTP sites can be open access or require authentication, depending on the host server configuration. Accessing data through FTP is typically reserved to older data systems as REST and API file transfer protocols have gained popularity due to privacy concerns associated with FTP systems. To understand APIs, see the <a href="accessAPIfromR.html#accessAPIfromR">Accessing APIs from R</a> section.</p>
</div>
<div id="tiger-dataset-use-case" class="section level3" number="6.4.2">
<h3><span class="header-section-number">6.4.2</span> TIGER Dataset Use Case</h3>
<p>The US Census Bureau distributes the <a href="https://www.census.gov/geographies/mapping-files/time-series/geo/tiger-line-file.html">Topologically Integrated Geographic Encoding and Referencing system (TIGER)</a> spatial datasets for researchers to integrate into their work. Geospatial products include shapefiles, KML, and file geodatabases representing annual updates to spatial representations of geographic boundaries (congressional districts, counties, zip codes, etc.) and features (roads, railroads, coastlines, etc.). Users may use a web interface or FTP protocols to access the data. The web interface is user-friendly when smaller amounts of data are required, but for large datasets and repeated tasks, using the FTP site is optimal to automate and standardize data retrieved.</p>
<p>The <a href="https://www.deq.virginia.gov/water/water-quality/monitoring/probabilistic-monitoring">Freshwater Probabilistic Monitoring program</a> utilizes the TIGER roads dataset, among other spatial datasets, to calculate road length, density, stream and road crossings, etc. within watersheds and riparian zones for all sites sampled statewide. This process requires analysts to retrieve new road layers every year. These road layers are stored by state and county FIPS code, so using the web interface would be challenging to retrieve all data for Virginia, but watersheds extend beyond state boundaries, so all counties with drainages to Virginia must also be compiled from North Carolina, Tennessee, West Virginia, Maryland, and the District of Columbia. It would be very easy to miss a geographic region without automation from year to year.</p>
</div>
<div id="required-packages-2" class="section level3" number="6.4.3">
<h3><span class="header-section-number">6.4.3</span> Required Packages</h3>
<p>In order to pull data from the US Census FTP site using R, users must have the following packaged loaded into your environment.</p>
<div class="sourceCode" id="cb165"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb165-1"><a href="scrapeDataFromFTP.html#cb165-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(rvest) </span>
<span id="cb165-2"><a href="scrapeDataFromFTP.html#cb165-2" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(tidyverse)</span>
<span id="cb165-3"><a href="scrapeDataFromFTP.html#cb165-3" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(stringr) </span>
<span id="cb165-4"><a href="scrapeDataFromFTP.html#cb165-4" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(sf) </span></code></pre></div>
</div>
<div id="build-base-ftp-web-address-call" class="section level3" number="6.4.4">
<h3><span class="header-section-number">6.4.4</span> Build Base FTP Web Address Call</h3>
<p>Next, we will build the web address call that will send our desired data request to the FTP server. It is best to test these URL requests iteratively in a web browser. One can parse the URL call to operationalize the logic for more automated use by separating out the year statement like the example below.</p>
<p>The chunk also establishes the name of a directory where all data retrieved will be stored using the object name <code>dirName</code>. It is important to create this directory locally before pulling data or the operation will not complete because it has nowhere to place the data.</p>
<div class="sourceCode" id="cb166"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb166-1"><a href="scrapeDataFromFTP.html#cb166-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Identify year to pull data from. This is critical to getting the FTP web address correct for </span></span>
<span id="cb166-2"><a href="scrapeDataFromFTP.html#cb166-2" aria-hidden="true" tabindex="-1"></a><span class="co">#         all subsequent analyses. If the web address fed to the subsequent function is incorrect, then</span></span>
<span id="cb166-3"><a href="scrapeDataFromFTP.html#cb166-3" aria-hidden="true" tabindex="-1"></a><span class="co">#         no data can be pulled.</span></span>
<span id="cb166-4"><a href="scrapeDataFromFTP.html#cb166-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb166-5"><a href="scrapeDataFromFTP.html#cb166-5" aria-hidden="true" tabindex="-1"></a><span class="co"># e.g. https://www2.census.gov/geo/tiger/TIGER2018/  is the appropriate web address for 2018 data.</span></span>
<span id="cb166-6"><a href="scrapeDataFromFTP.html#cb166-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb166-7"><a href="scrapeDataFromFTP.html#cb166-7" aria-hidden="true" tabindex="-1"></a>year <span class="ot">&lt;-</span> <span class="dv">2021</span></span>
<span id="cb166-8"><a href="scrapeDataFromFTP.html#cb166-8" aria-hidden="true" tabindex="-1"></a>FTPaddress <span class="ot">&lt;-</span> <span class="fu">paste0</span>(<span class="st">&quot;https://www2.census.gov/geo/tiger/TIGER&quot;</span>,year,<span class="st">&quot;/ROADS&quot;</span>)</span>
<span id="cb166-9"><a href="scrapeDataFromFTP.html#cb166-9" aria-hidden="true" tabindex="-1"></a>dirName <span class="ot">&lt;-</span> <span class="st">&#39;tigerRoadsPull&#39;</span> <span class="co"># create a folder in the project directory with this exact name to store all downloaded zip files</span></span></code></pre></div>
</div>
<div id="custom-tigerroads-ftp-function" class="section level3" number="6.4.5">
<h3><span class="header-section-number">6.4.5</span> Custom TIGERroads FTP function</h3>
<p>Building this workflow into a custom function makes this process more reproducible and efficient. The below function uses the <code>year</code> and <code>dirName</code> objects created above to efficiently pull data from the TIGER FTP site. This function will go to the area of the TIGER FTP site specified in the custom URL, look for the file provided in the <code>fileName</code> argument, and download that file to the directory specified in the <code>outDirectory</code> argument. This function is built to handle multiple requests, so users can provided multiple <code>fileName</code> arguments in the form of a vector for the embedded loop to iterate over.</p>
<div class="sourceCode" id="cb167"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb167-1"><a href="scrapeDataFromFTP.html#cb167-1" aria-hidden="true" tabindex="-1"></a>downloadTigerRoadsByYear <span class="ot">&lt;-</span> <span class="cf">function</span>(year, <span class="co"># year we want data from</span></span>
<span id="cb167-2"><a href="scrapeDataFromFTP.html#cb167-2" aria-hidden="true" tabindex="-1"></a>                                     fileName, <span class="co"># structured file name to retrieve</span></span>
<span id="cb167-3"><a href="scrapeDataFromFTP.html#cb167-3" aria-hidden="true" tabindex="-1"></a>                                     outDirectory <span class="co"># where we want to save the results</span></span>
<span id="cb167-4"><a href="scrapeDataFromFTP.html#cb167-4" aria-hidden="true" tabindex="-1"></a>                                     ){</span>
<span id="cb167-5"><a href="scrapeDataFromFTP.html#cb167-5" aria-hidden="true" tabindex="-1"></a>  <span class="cf">for</span>(i <span class="cf">in</span> <span class="dv">1</span><span class="sc">:</span><span class="fu">length</span>(fileName)){</span>
<span id="cb167-6"><a href="scrapeDataFromFTP.html#cb167-6" aria-hidden="true" tabindex="-1"></a>    <span class="fu">download.file</span>(<span class="at">url =</span> <span class="fu">paste0</span>(<span class="st">&#39;https://www2.census.gov/geo/tiger/TIGER&#39;</span>,</span>
<span id="cb167-7"><a href="scrapeDataFromFTP.html#cb167-7" aria-hidden="true" tabindex="-1"></a>                               year,<span class="st">&#39;/ROADS/&#39;</span>, fileName[i]),</span>
<span id="cb167-8"><a href="scrapeDataFromFTP.html#cb167-8" aria-hidden="true" tabindex="-1"></a>                  <span class="at">destfile =</span> <span class="fu">paste0</span>(outDirectory,<span class="st">&#39;/&#39;</span>, fileName[i]))</span>
<span id="cb167-9"><a href="scrapeDataFromFTP.html#cb167-9" aria-hidden="true" tabindex="-1"></a>  }</span>
<span id="cb167-10"><a href="scrapeDataFromFTP.html#cb167-10" aria-hidden="true" tabindex="-1"></a>}</span></code></pre></div>
<p>To use the <code>downloadTigerRoadsByYear()</code> function, users need to provide one or more files to look for on the FTP site. The FTP stores each road file by concatenated state and county FIPS codes. For this example, we will pull three counties in Virginia by the appropriate FIPS codes: 51775, 51121, 51735, which equate to Salem City, Montgomery County, and Poquoson City.</p>
<div class="sourceCode" id="cb168"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb168-1"><a href="scrapeDataFromFTP.html#cb168-1" aria-hidden="true" tabindex="-1"></a>FIPScodes <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">&quot;51775&quot;</span>, <span class="st">&quot;51121&quot;</span>, <span class="st">&quot;51735&quot;</span>)</span>
<span id="cb168-2"><a href="scrapeDataFromFTP.html#cb168-2" aria-hidden="true" tabindex="-1"></a><span class="fu">downloadTigerRoadsByYear</span>(year,</span>
<span id="cb168-3"><a href="scrapeDataFromFTP.html#cb168-3" aria-hidden="true" tabindex="-1"></a>                         <span class="fu">paste0</span>(<span class="st">&#39;tl_&#39;</span>,year,<span class="st">&#39;_&#39;</span>, <span class="fu">as.character</span>(FIPScodes),<span class="st">&#39;_roads.zip&#39;</span>),</span>
<span id="cb168-4"><a href="scrapeDataFromFTP.html#cb168-4" aria-hidden="true" tabindex="-1"></a>                         <span class="fu">paste0</span>(dirName,<span class="st">&#39;/&#39;</span>, year))</span></code></pre></div>
<p>When the function has completed running, the directory the data was placed in will be filled with three zip files.</p>
<p><img src="images/FTP1.png" /></p>
</div>
<div id="parse-data-into-single-file" class="section level3" number="6.4.6">
<h3><span class="header-section-number">6.4.6</span> Parse Data into Single File</h3>
<p>To use this data efficiently, we will extract each .zip file and combine them into a single spatial dataset. First, create a new directory named ‘unzipped’ inside the <code>dirName</code> directory to house all the unzipped files. Inside this new directory named ‘unzipped,’ create a new directory named the year specified in the <code>year</code> object. This next chunk will unzip all the files downloaded from the FTP site and place them inside the appropriate <code>year</code> directory in the ‘unzipped’ directory.</p>
<div class="sourceCode" id="cb169"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb169-1"><a href="scrapeDataFromFTP.html#cb169-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Unzip and combine all files in the dirName directory into one shapefile</span></span>
<span id="cb169-2"><a href="scrapeDataFromFTP.html#cb169-2" aria-hidden="true" tabindex="-1"></a>filenames <span class="ot">&lt;-</span> <span class="fu">list.files</span>( <span class="fu">paste0</span>(dirName,<span class="st">&#39;/&#39;</span>, year), <span class="at">pattern=</span><span class="st">&quot;*.zip&quot;</span>, <span class="at">full.names=</span><span class="cn">TRUE</span>)</span>
<span id="cb169-3"><a href="scrapeDataFromFTP.html#cb169-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb169-4"><a href="scrapeDataFromFTP.html#cb169-4" aria-hidden="true" tabindex="-1"></a><span class="fu">lapply</span>(filenames, unzip, <span class="at">exdir=</span><span class="fu">paste0</span>(<span class="st">&#39;tigerRoadsPull/unzipped/&#39;</span>,year)) <span class="co"># unzip all filenames that end in zip into folder named unzipped</span></span>
<span id="cb169-5"><a href="scrapeDataFromFTP.html#cb169-5" aria-hidden="true" tabindex="-1"></a>filenames_slim <span class="ot">&lt;-</span> <span class="fu">gsub</span>(<span class="st">&#39;.zip&#39;</span>, <span class="st">&#39;&#39;</span> , <span class="fu">gsub</span>(<span class="fu">paste0</span>(<span class="st">&#39;tigerRoadsPull/&#39;</span>,year,<span class="st">&#39;/&#39;</span>),<span class="st">&#39;&#39;</span>, filenames ))</span></code></pre></div>
<p>When pulling lots of data, there can be momentary interruptions in server connectivity that could result in a file or files not downloaded. In this chunk, we will double check that all desired files were downloaded and extracted.</p>
<div class="sourceCode" id="cb170"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb170-1"><a href="scrapeDataFromFTP.html#cb170-1" aria-hidden="true" tabindex="-1"></a><span class="co"># check to make sure all downloaded files were unzipped correctly</span></span>
<span id="cb170-2"><a href="scrapeDataFromFTP.html#cb170-2" aria-hidden="true" tabindex="-1"></a>filenamesUnzipped <span class="ot">&lt;-</span> <span class="fu">list.files</span>(<span class="fu">paste0</span>(dirName,<span class="st">&#39;/unzipped/&#39;</span>,year), <span class="at">pattern=</span><span class="st">&quot;*.shx&quot;</span>, <span class="at">full.names=</span>F) <span class="co"># search by .cpg bc .shp has a few extension options and duplicates unique names</span></span>
<span id="cb170-3"><a href="scrapeDataFromFTP.html#cb170-3" aria-hidden="true" tabindex="-1"></a>filenamesUnzipped_slim <span class="ot">&lt;-</span> <span class="fu">gsub</span>(<span class="st">&#39;.shx&#39;</span>,<span class="st">&#39;&#39;</span>,filenamesUnzipped)</span>
<span id="cb170-4"><a href="scrapeDataFromFTP.html#cb170-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb170-5"><a href="scrapeDataFromFTP.html#cb170-5" aria-hidden="true" tabindex="-1"></a><span class="fu">all</span>(filenames_slim <span class="sc">%in%</span> filenamesUnzipped_slim )</span>
<span id="cb170-6"><a href="scrapeDataFromFTP.html#cb170-6" aria-hidden="true" tabindex="-1"></a><span class="co"># if true then cool</span></span></code></pre></div>
<p>The ‘unzipped’ directory will now look like this:</p>
<p><img src="images/FTP2.png" /></p>
<p>If files are missing, you should rerun the <code>downloadTigerRoadsByYear()</code> function with just the missing files, extract the data, and rerun the QA check. Here is a bit of code to help you identify which files might be missing.</p>
<div class="sourceCode" id="cb171"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb171-1"><a href="scrapeDataFromFTP.html#cb171-1" aria-hidden="true" tabindex="-1"></a><span class="co"># if not then find out which missing</span></span>
<span id="cb171-2"><a href="scrapeDataFromFTP.html#cb171-2" aria-hidden="true" tabindex="-1"></a>filenames_slim [<span class="sc">!</span>(filenames_slim <span class="sc">%in%</span> filenamesUnzipped_slim )]</span>
<span id="cb171-3"><a href="scrapeDataFromFTP.html#cb171-3" aria-hidden="true" tabindex="-1"></a><span class="co"># an output of character(0) is good because it means there are none missing</span></span></code></pre></div>
<p>Lastly, we will combine all the individual county files into a single shapefile to make the dataset most useful. The purrr library is very useful to map the sf::st_read function across all the files in the directory, parsing them into a single object. The last step in this chunk saves the <code>shapefiles</code> object locally using a specified directory schema as a shapefile for use in further analyses. You should update the directory schema to match your local environment.</p>
<div class="sourceCode" id="cb172"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb172-1"><a href="scrapeDataFromFTP.html#cb172-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Read in unzipped files and combine to single object</span></span>
<span id="cb172-2"><a href="scrapeDataFromFTP.html#cb172-2" aria-hidden="true" tabindex="-1"></a>filenamesUnzipped <span class="ot">&lt;-</span> <span class="fu">paste0</span>(dirName,<span class="st">&#39;/unzipped/&#39;</span>,year,<span class="st">&#39;/&#39;</span>,<span class="fu">gsub</span>(<span class="st">&#39;.shx&#39;</span>,<span class="st">&#39;.shp&#39;</span>, filenamesUnzipped)) </span>
<span id="cb172-3"><a href="scrapeDataFromFTP.html#cb172-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb172-4"><a href="scrapeDataFromFTP.html#cb172-4" aria-hidden="true" tabindex="-1"></a>shapefiles <span class="ot">&lt;-</span> filenamesUnzipped <span class="sc">%&gt;%</span></span>
<span id="cb172-5"><a href="scrapeDataFromFTP.html#cb172-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">map</span>(st_read) <span class="sc">%&gt;%</span></span>
<span id="cb172-6"><a href="scrapeDataFromFTP.html#cb172-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">reduce</span>(rbind)</span>
<span id="cb172-7"><a href="scrapeDataFromFTP.html#cb172-7" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb172-8"><a href="scrapeDataFromFTP.html#cb172-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb172-9"><a href="scrapeDataFromFTP.html#cb172-9" aria-hidden="true" tabindex="-1"></a><span class="co"># Save out shapefile</span></span>
<span id="cb172-10"><a href="scrapeDataFromFTP.html#cb172-10" aria-hidden="true" tabindex="-1"></a><span class="fu">st_write</span>(shapefiles, <span class="fu">paste0</span>(<span class="st">&#39;GISdata/TIGERroads/&#39;</span>, year, <span class="st">&#39;tigerRoads.shp&#39;</span>))</span></code></pre></div>

</div>
</div>
<!-- </div> -->
            </section>

          </div>
        </div>
      </div>
<a href="accessAPIfromR.html" class="navigation navigation-prev navigation-unique" aria-label="Previous page"><i class="fa fa-angle-left"></i></a>

    </div>
  </div>
<script src="libs/gitbook-2.6.7/js/app.min.js"></script>
<script src="libs/gitbook-2.6.7/js/lunr.js"></script>
<script src="libs/gitbook-2.6.7/js/clipboard.min.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-search.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-sharing.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-fontsettings.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-bookdown.js"></script>
<script src="libs/gitbook-2.6.7/js/jquery.highlight.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-clipboard.js"></script>
<script>
gitbook.require(["gitbook"], function(gitbook) {
gitbook.start({
"sharing": {
"github": false,
"facebook": false,
"twitter": false,
"linkedin": false,
"weibo": false,
"instapaper": false,
"vk": false,
"all": null
},
"fontsettings": {
"theme": "white",
"family": "sans",
"size": 2
},
"edit": null,
"history": {
"link": null,
"text": null
},
"view": {
"link": null,
"text": null
},
"download": ["series.pdf"],
"toc": {
"collapse": "subsection"
}
});
});
</script>

</body>

</html>
