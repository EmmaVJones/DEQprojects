<!DOCTYPE html>
<html lang="" xml:lang="">
<head>

  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <title>2.2 Connect to ODS | DEQ R Methods Encyclopedia</title>
  <meta name="description" content="Simple reprex of common tasks DEQ staff encounter and how to complete them with R." />
  <meta name="generator" content="bookdown 0.21 and GitBook 2.6.7" />

  <meta property="og:title" content="2.2 Connect to ODS | DEQ R Methods Encyclopedia" />
  <meta property="og:type" content="book" />
  
  
  <meta property="og:description" content="Simple reprex of common tasks DEQ staff encounter and how to complete them with R." />
  <meta name="github-repo" content="openscapes/series" />

  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content="2.2 Connect to ODS | DEQ R Methods Encyclopedia" />
  
  <meta name="twitter:description" content="Simple reprex of common tasks DEQ staff encounter and how to complete them with R." />
  

<meta name="author" content="DEQ R Development Team" />


<meta name="date" content="2022-05-25" />

  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="black" />
  
  
<link rel="prev" href="connectToConnectPins.html"/>
<link rel="next" href="queryDataFromODS.html"/>
<script src="libs/header-attrs-2.6/header-attrs.js"></script>
<script src="libs/jquery-2.2.3/jquery.min.js"></script>
<link href="libs/gitbook-2.6.7/css/style.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-table.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-bookdown.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-highlight.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-search.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-fontsettings.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-clipboard.css" rel="stylesheet" />









<script src="libs/htmlwidgets-1.5.1/htmlwidgets.js"></script>
<link href="libs/datatables-css-0.0.0/datatables-crosstalk.css" rel="stylesheet" />
<script src="libs/datatables-binding-0.13/datatables.js"></script>
<link href="libs/dt-core-1.10.20/css/jquery.dataTables.min.css" rel="stylesheet" />
<link href="libs/dt-core-1.10.20/css/jquery.dataTables.extra.css" rel="stylesheet" />
<script src="libs/dt-core-1.10.20/js/jquery.dataTables.min.js"></script>
<link href="libs/crosstalk-1.0.0/css/crosstalk.css" rel="stylesheet" />
<script src="libs/crosstalk-1.0.0/js/crosstalk.min.js"></script>
<link href="libs/leaflet-1.3.1/leaflet.css" rel="stylesheet" />
<script src="libs/leaflet-1.3.1/leaflet.js"></script>
<link href="libs/leafletfix-1.0.0/leafletfix.css" rel="stylesheet" />
<script src="libs/Proj4Leaflet-1.0.1/proj4-compressed.js"></script>
<script src="libs/Proj4Leaflet-1.0.1/proj4leaflet.js"></script>
<link href="libs/rstudio_leaflet-1.3.1/rstudio_leaflet.css" rel="stylesheet" />
<script src="libs/leaflet-binding-2.0.3/leaflet.js"></script>
<link href="libs/pagedtable-1.1/css/pagedtable.css" rel="stylesheet" />
<script src="libs/pagedtable-1.1/js/pagedtable.js"></script>


<style type="text/css">
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
</style>

<link rel="stylesheet" href="lib/css/bootstrap.min.css" type="text/css" />
<link rel="stylesheet" href="lib/css/style.css" type="text/css" />
<link rel="stylesheet" href="lib/css/lesson.css" type="text/css" />
</head>

<body>



  <div class="book without-animation with-summary font-size-2 font-family-1" data-basepath=".">

    <div class="book-summary">
      <nav role="navigation">

<ul class="summary">
<li><a href="./">DEQ R Methods Encyclopedia</a></li>

<li class="divider"></li>
<li class="chapter" data-level="1" data-path="index.html"><a href="index.html"><i class="fa fa-check"></i><b>1</b> Background</a>
<ul>
<li class="chapter" data-level="1.1" data-path="whyR.html"><a href="whyR.html"><i class="fa fa-check"></i><b>1.1</b> Why R?</a></li>
<li class="chapter" data-level="1.2" data-path="gettingStartedWithR.html"><a href="gettingStartedWithR.html"><i class="fa fa-check"></i><b>1.2</b> Getting Started With R</a>
<ul>
<li class="chapter" data-level="1.2.1" data-path="gettingStartedWithR.html"><a href="gettingStartedWithR.html#downloading-r-and-rstudio"><i class="fa fa-check"></i><b>1.2.1</b> Downloading R and RStudio</a></li>
<li class="chapter" data-level="1.2.2" data-path="gettingStartedWithR.html"><a href="gettingStartedWithR.html#configuring-rstudio"><i class="fa fa-check"></i><b>1.2.2</b> Configuring RStudio</a></li>
<li class="chapter" data-level="1.2.3" data-path="gettingStartedWithR.html"><a href="gettingStartedWithR.html#downloading-packages"><i class="fa fa-check"></i><b>1.2.3</b> Downloading Packages</a></li>
</ul></li>
<li class="chapter" data-level="1.3" data-path="wantToContribute.html"><a href="wantToContribute.html"><i class="fa fa-check"></i><b>1.3</b> Want to Contribute?</a></li>
</ul></li>
<li class="chapter" data-level="2" data-path="queryInternalDataSources.html"><a href="queryInternalDataSources.html"><i class="fa fa-check"></i><b>2</b> Query Internal Data Sources</a>
<ul>
<li class="chapter" data-level="2.1" data-path="connectToConnectPins.html"><a href="connectToConnectPins.html"><i class="fa fa-check"></i><b>2.1</b> Connecting to R Connect (for Pinned Data)</a>
<ul>
<li class="chapter" data-level="2.1.1" data-path="connectToConnectPins.html"><a href="connectToConnectPins.html#api-keys"><i class="fa fa-check"></i><b>2.1.1</b> API Keys</a></li>
<li class="chapter" data-level="2.1.2" data-path="connectToConnectPins.html"><a href="connectToConnectPins.html#connect-to-the-r-server"><i class="fa fa-check"></i><b>2.1.2</b> Connect to the R server</a></li>
<li class="chapter" data-level="2.1.3" data-path="connectToConnectPins.html"><a href="connectToConnectPins.html#browse-available-pins"><i class="fa fa-check"></i><b>2.1.3</b> Browse Available Pins</a></li>
<li class="chapter" data-level="2.1.4" data-path="connectToConnectPins.html"><a href="connectToConnectPins.html#access-a-pin"><i class="fa fa-check"></i><b>2.1.4</b> Access a Pin</a></li>
<li class="chapter" data-level="2.1.5" data-path="connectToConnectPins.html"><a href="connectToConnectPins.html#query-some-of-a-pin"><i class="fa fa-check"></i><b>2.1.5</b> Query (some of) a Pin</a></li>
</ul></li>
<li class="chapter" data-level="2.2" data-path="connectToODS.html"><a href="connectToODS.html"><i class="fa fa-check"></i><b>2.2</b> Connect to ODS</a>
<ul>
<li class="chapter" data-level="2.2.1" data-path="connectToODS.html"><a href="connectToODS.html#credentials-local-vs-remote"><i class="fa fa-check"></i><b>2.2.1</b> Credentials (Local vs Remote)</a></li>
<li class="chapter" data-level="2.2.2" data-path="connectToODS.html"><a href="connectToODS.html#required-packages"><i class="fa fa-check"></i><b>2.2.2</b> Required Packages</a></li>
<li class="chapter" data-level="2.2.3" data-path="connectToODS.html"><a href="connectToODS.html#dbi-method-for-ods-connection"><i class="fa fa-check"></i><b>2.2.3</b> DBI Method for ODS Connection</a></li>
<li class="chapter" data-level="2.2.4" data-path="connectToODS.html"><a href="connectToODS.html#pool-method-for-ods-connection"><i class="fa fa-check"></i><b>2.2.4</b> Pool Method for ODS Connection</a></li>
<li class="chapter" data-level="2.2.5" data-path="connectToODS.html"><a href="connectToODS.html#pool-method-query-data"><i class="fa fa-check"></i><b>2.2.5</b> Pool Method: Query Data</a></li>
</ul></li>
<li class="chapter" data-level="2.3" data-path="queryDataFromODS.html"><a href="queryDataFromODS.html"><i class="fa fa-check"></i><b>2.3</b> Querying Data from ODS</a>
<ul>
<li class="chapter" data-level="2.3.1" data-path="queryDataFromODS.html"><a href="queryDataFromODS.html#connecting-and-disconnecting-from-a-database"><i class="fa fa-check"></i><b>2.3.1</b> Connecting and Disconnecting from a Database</a></li>
<li class="chapter" data-level="2.3.2" data-path="queryDataFromODS.html"><a href="queryDataFromODS.html#data-schema"><i class="fa fa-check"></i><b>2.3.2</b> Data Schema</a></li>
<li class="chapter" data-level="2.3.3" data-path="queryDataFromODS.html"><a href="queryDataFromODS.html#data-views-interaction"><i class="fa fa-check"></i><b>2.3.3</b> Data Views Interaction</a></li>
<li class="chapter" data-level="2.3.4" data-path="queryDataFromODS.html"><a href="queryDataFromODS.html#data-update-frequency"><i class="fa fa-check"></i><b>2.3.4</b> Data Update Frequency</a></li>
</ul></li>
<li class="chapter" data-level="2.4" data-path="commonWQMqueries.html"><a href="commonWQMqueries.html"><i class="fa fa-check"></i><b>2.4</b> Common WQM queries</a></li>
<li class="chapter" data-level="2.5" data-path="commonBenthicqueries.html"><a href="commonBenthicqueries.html"><i class="fa fa-check"></i><b>2.5</b> Common Benthic queries</a></li>
<li class="chapter" data-level="2.6" data-path="commonWQAqueries.html"><a href="commonWQAqueries.html"><i class="fa fa-check"></i><b>2.6</b> Common WQA queries</a></li>
<li class="chapter" data-level="2.7" data-path="commonTMDLqueries.html"><a href="commonTMDLqueries.html"><i class="fa fa-check"></i><b>2.7</b> Common TMDL queries</a></li>
</ul></li>
<li class="chapter" data-level="3" data-path="spatialAnalysis.html"><a href="spatialAnalysis.html"><i class="fa fa-check"></i><b>3</b> Spatial Analysis</a>
<ul>
<li class="chapter" data-level="3.1" data-path="spatialDataFromTabularData.html"><a href="spatialDataFromTabularData.html"><i class="fa fa-check"></i><b>3.1</b> Spatial Data from Tabular Data</a>
<ul>
<li class="chapter" data-level="3.1.1" data-path="spatialDataFromTabularData.html"><a href="spatialDataFromTabularData.html#removing-spatial-information"><i class="fa fa-check"></i><b>3.1.1</b> Removing Spatial Information</a></li>
</ul></li>
<li class="chapter" data-level="3.2" data-path="consumingGISRESTservices.html"><a href="consumingGISRESTservices.html"><i class="fa fa-check"></i><b>3.2</b> Consuming GIS REST Services in R</a>
<ul>
<li class="chapter" data-level="3.2.1" data-path="consumingGISRESTservices.html"><a href="consumingGISRESTservices.html#gis-rest-service-data"><i class="fa fa-check"></i><b>3.2.1</b> GIS Rest Service Data</a></li>
<li class="chapter" data-level="3.2.2" data-path="consumingGISRESTservices.html"><a href="consumingGISRESTservices.html#primary-deq-rest-endpoints"><i class="fa fa-check"></i><b>3.2.2</b> Primary DEQ REST Endpoints:</a></li>
<li class="chapter" data-level="3.2.3" data-path="consumingGISRESTservices.html"><a href="consumingGISRESTservices.html#how-do-you-know-what-fieldscriteria-to-query-on"><i class="fa fa-check"></i><b>3.2.3</b> How do you know what fields/criteria to query on?</a></li>
<li class="chapter" data-level="3.2.4" data-path="consumingGISRESTservices.html"><a href="consumingGISRESTservices.html#okaylets-build-a-simple-query-and-see-it-in-r"><i class="fa fa-check"></i><b>3.2.4</b> Okay…let’s build a simple query and see it in R…</a></li>
<li class="chapter" data-level="3.2.5" data-path="consumingGISRESTservices.html"><a href="consumingGISRESTservices.html#querying-multiple-records"><i class="fa fa-check"></i><b>3.2.5</b> Querying multiple records:</a></li>
<li class="chapter" data-level="3.2.6" data-path="consumingGISRESTservices.html"><a href="consumingGISRESTservices.html#this-works-on-lines-and-polygons-as-well"><i class="fa fa-check"></i><b>3.2.6</b> This works on lines and polygons as well!:</a></li>
<li class="chapter" data-level="3.2.7" data-path="consumingGISRESTservices.html"><a href="consumingGISRESTservices.html#building-more-advanced-queries"><i class="fa fa-check"></i><b>3.2.7</b> Building more advanced queries</a></li>
</ul></li>
<li class="chapter" data-level="3.3" data-path="spatialOperationsGISRESTservices.html"><a href="spatialOperationsGISRESTservices.html"><i class="fa fa-check"></i><b>3.3</b> Spatial Operations on GIS REST Services in R</a>
<ul>
<li class="chapter" data-level="3.3.1" data-path="spatialOperationsGISRESTservices.html"><a href="spatialOperationsGISRESTservices.html#gis-rest-service-data-1"><i class="fa fa-check"></i><b>3.3.1</b> GIS Rest Service Data</a></li>
<li class="chapter" data-level="3.3.2" data-path="spatialOperationsGISRESTservices.html"><a href="spatialOperationsGISRESTservices.html#level-up-your-querying-game"><i class="fa fa-check"></i><b>3.3.2</b> Level Up Your Querying Game</a></li>
<li class="chapter" data-level="3.3.3" data-path="spatialOperationsGISRESTservices.html"><a href="spatialOperationsGISRESTservices.html#set-up-your-environment"><i class="fa fa-check"></i><b>3.3.3</b> Set Up Your Environment</a></li>
<li class="chapter" data-level="3.3.4" data-path="spatialOperationsGISRESTservices.html"><a href="spatialOperationsGISRESTservices.html#query-one-layer"><i class="fa fa-check"></i><b>3.3.4</b> Query One Layer</a></li>
<li class="chapter" data-level="3.3.5" data-path="spatialOperationsGISRESTservices.html"><a href="spatialOperationsGISRESTservices.html#spatially-intersect-layers"><i class="fa fa-check"></i><b>3.3.5</b> Spatially Intersect Layers</a></li>
</ul></li>
<li class="chapter" data-level="3.4" data-path="usingSpatialDatasets.html"><a href="usingSpatialDatasets.html"><i class="fa fa-check"></i><b>3.4</b> Using Spatial Datasets</a></li>
<li class="chapter" data-level="3.5" data-path="interactiveMapping.html"><a href="interactiveMapping.html"><i class="fa fa-check"></i><b>3.5</b> Interactive Mapping</a></li>
<li class="chapter" data-level="3.6" data-path="watershed-delineation.html"><a href="watershed-delineation.html"><i class="fa fa-check"></i><b>3.6</b> Watershed Delineation</a>
<ul>
<li class="chapter" data-level="3.6.1" data-path="watershed-delineation.html"><a href="watershed-delineation.html#single-station-delineation"><i class="fa fa-check"></i><b>3.6.1</b> Single Station Delineation</a></li>
<li class="chapter" data-level="3.6.2" data-path="watershed-delineation.html"><a href="watershed-delineation.html#multiple-station-delineation"><i class="fa fa-check"></i><b>3.6.2</b> Multiple Station Delineation</a></li>
<li class="chapter" data-level="3.6.3" data-path="watershed-delineation.html"><a href="watershed-delineation.html#qa"><i class="fa fa-check"></i><b>3.6.3</b> QA</a></li>
</ul></li>
<li class="chapter" data-level="3.7" data-path="landcover-analysis.html"><a href="landcover-analysis.html"><i class="fa fa-check"></i><b>3.7</b> Landcover analysis</a></li>
<li class="chapter" data-level="3.8" data-path="spatial-joins.html"><a href="spatial-joins.html"><i class="fa fa-check"></i><b>3.8</b> Spatial joins</a></li>
</ul></li>
<li class="chapter" data-level="4" data-path="shinyAppHelp.html"><a href="shinyAppHelp.html"><i class="fa fa-check"></i><b>4</b> Shiny App Pro Tips</a>
<ul>
<li class="chapter" data-level="4.1" data-path="shiny-file-organization.html"><a href="shiny-file-organization.html"><i class="fa fa-check"></i><b>4.1</b> Shiny file organization</a></li>
<li class="chapter" data-level="4.2" data-path="shiny-tricks.html"><a href="shiny-tricks.html"><i class="fa fa-check"></i><b>4.2</b> Shiny Tricks</a></li>
<li class="chapter" data-level="4.3" data-path="markdown-and-user-friendly-output-files.html"><a href="markdown-and-user-friendly-output-files.html"><i class="fa fa-check"></i><b>4.3</b> Markdown and User-Friendly Output Files</a></li>
</ul></li>
<li class="chapter" data-level="5" data-path="miscTips.html"><a href="miscTips.html"><i class="fa fa-check"></i><b>5</b> Miscellaeous Tips and Tricks</a>
<ul>
<li class="chapter" data-level="5.1" data-path="regular-expression-and-pattern-matching.html"><a href="regular-expression-and-pattern-matching.html"><i class="fa fa-check"></i><b>5.1</b> Regular expression and pattern matching</a>
<ul>
<li class="chapter" data-level="5.1.1" data-path="regular-expression-and-pattern-matching.html"><a href="regular-expression-and-pattern-matching.html#regexOverview"><i class="fa fa-check"></i><b>5.1.1</b> Example Data Overview</a></li>
<li class="chapter" data-level="5.1.2" data-path="regular-expression-and-pattern-matching.html"><a href="regular-expression-and-pattern-matching.html#regexInR"><i class="fa fa-check"></i><b>5.1.2</b> Common R Commands and How to Use Them</a></li>
<li class="chapter" data-level="5.1.3" data-path="regular-expression-and-pattern-matching.html"><a href="regular-expression-and-pattern-matching.html#regexBasics"><i class="fa fa-check"></i><b>5.1.3</b> Basic Regular Expressions</a></li>
<li class="chapter" data-level="5.1.4" data-path="regular-expression-and-pattern-matching.html"><a href="regular-expression-and-pattern-matching.html#regexCharacters"><i class="fa fa-check"></i><b>5.1.4</b> Character Classes</a></li>
<li class="chapter" data-level="5.1.5" data-path="regular-expression-and-pattern-matching.html"><a href="regular-expression-and-pattern-matching.html#regexQuantifiers"><i class="fa fa-check"></i><b>5.1.5</b> Quantifiers</a></li>
<li class="chapter" data-level="5.1.6" data-path="regular-expression-and-pattern-matching.html"><a href="regular-expression-and-pattern-matching.html#regexAnchors"><i class="fa fa-check"></i><b>5.1.6</b> Anchors</a></li>
<li class="chapter" data-level="5.1.7" data-path="regular-expression-and-pattern-matching.html"><a href="regular-expression-and-pattern-matching.html#regexExamples"><i class="fa fa-check"></i><b>5.1.7</b> Common or Useful Patterns</a></li>
<li class="chapter" data-level="5.1.8" data-path="regular-expression-and-pattern-matching.html"><a href="regular-expression-and-pattern-matching.html#regexResources"><i class="fa fa-check"></i><b>5.1.8</b> Additional Resources</a></li>
</ul></li>
<li class="chapter" data-level="5.2" data-path="non-standard-evaluation.html"><a href="non-standard-evaluation.html"><i class="fa fa-check"></i><b>5.2</b> Non standard evaluation</a></li>
<li class="chapter" data-level="5.3" data-path="accessAPIfromR.html"><a href="accessAPIfromR.html"><i class="fa fa-check"></i><b>5.3</b> Accessing APIs from R</a>
<ul>
<li class="chapter" data-level="5.3.1" data-path="accessAPIfromR.html"><a href="accessAPIfromR.html#what-is-an-api"><i class="fa fa-check"></i><b>5.3.1</b> What is an API</a></li>
<li class="chapter" data-level="5.3.2" data-path="accessAPIfromR.html"><a href="accessAPIfromR.html#CMCuseCase"><i class="fa fa-check"></i><b>5.3.2</b> CMC API Use Case</a></li>
<li class="chapter" data-level="5.3.3" data-path="accessAPIfromR.html"><a href="accessAPIfromR.html#required-packages-1"><i class="fa fa-check"></i><b>5.3.3</b> Required Packages</a></li>
<li class="chapter" data-level="5.3.4" data-path="accessAPIfromR.html"><a href="accessAPIfromR.html#explore-the-endpoint-in-a-browser"><i class="fa fa-check"></i><b>5.3.4</b> Explore the endpoint in a browser</a></li>
<li class="chapter" data-level="5.3.5" data-path="accessAPIfromR.html"><a href="accessAPIfromR.html#query-api-with-r"><i class="fa fa-check"></i><b>5.3.5</b> Query API with R</a></li>
<li class="chapter" data-level="5.3.6" data-path="accessAPIfromR.html"><a href="accessAPIfromR.html#example-query-cmc-api-for-assessment-uses"><i class="fa fa-check"></i><b>5.3.6</b> Example: Query CMC API for Assessment Uses</a></li>
<li class="chapter" data-level="5.3.7" data-path="accessAPIfromR.html"><a href="accessAPIfromR.html#parting-challenge"><i class="fa fa-check"></i><b>5.3.7</b> Parting Challenge</a></li>
</ul></li>
</ul></li>
<li class="divider"></li>
<li><a href="https://bookdown.org" target="blank">Published with bookdown</a></li>

</ul>

      </nav>
    </div>

    <div class="book-body">
      <div class="body-inner">
        <div class="book-header" role="navigation">
          <h1>
            <i class="fa fa-circle-o-notch fa-spin"></i><a href="./">DEQ R Methods Encyclopedia</a>
          </h1>
        </div>

        <div class="page-wrapper" tabindex="-1" role="main">
          <div class="page-inner">

            <section class="normal" id="section-">
<div id="connectToODS" class="section level2" number="2.2">
<h2><span class="header-section-number">2.2</span> Connect to ODS</h2>
<p><strong>Section Contact: Emma Jones (<a href="mailto:emma.jones@deq.virginia.gov" class="email">emma.jones@deq.virginia.gov</a>)</strong></p>
<p>The ODS environment allows read-only access from your local R instance to the overnight copy of data stored in CEDS. The Oracle based CEDS environment is transferred to a SQLServer database each evening, ensuring data entered into CEDS is available for querying from ODS the next morning.</p>
<div id="credentials-local-vs-remote" class="section level3" number="2.2.1">
<h3><span class="header-section-number">2.2.1</span> Credentials (Local vs Remote)</h3>
<p>Your Microsoft (MS) credentials are used for verifying you have access rights to this database. Details on acquiring access to this data source are available in the <a href="#queryInternalDataSource">Query Internal Data Sources</a> chapter. If you are building a report or application that relies on querying data from ODS at prescribed intervals, your personal MS credentials will not work when your data product is deployed to the R server. Instead, you must perform all data product testing locally with your personal MS credentials. Upon pushing your data product to the R server, you must switch the ODS credentials to the R server’s unique credentials for the program to work on the remote server. To obtain the R server’s ODS credentials, please contact Emma Jones (<a href="mailto:emma.jones@deq.virginia.gov" class="email">emma.jones@deq.virginia.gov</a>) with specifics on exactly which areas of ODS your data product require access, how frequently your product hits ODS, example data retrieved from the environment, and general application purpose, use case, and audience information.</p>
</div>
<div id="required-packages" class="section level3" number="2.2.2">
<h3><span class="header-section-number">2.2.2</span> Required Packages</h3>
<p>To access ODS, you will need to use specific R packages that enable database access in addition to the recommended tidyverse package for general data management. The chunk below specifies which packages are required for the two methods for connecting to ODS overviewed in this report. The “pool method” requires the R packages pool and dbplyr while the “DBI method” requires the odbc and DBI R packages.</p>
<p>Like all tasks completed in R, it is good be be aware that there are multiple methods to perform various operations, but in time users tend to prefer certain methods over others for their regular business practices.</p>
<div class="sourceCode" id="cb7"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb7-1"><a href="connectToODS.html#cb7-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(tidyverse)</span>
<span id="cb7-2"><a href="connectToODS.html#cb7-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb7-3"><a href="connectToODS.html#cb7-3" aria-hidden="true" tabindex="-1"></a><span class="co"># &quot;pool method&quot; required packages</span></span>
<span id="cb7-4"><a href="connectToODS.html#cb7-4" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(pool)</span>
<span id="cb7-5"><a href="connectToODS.html#cb7-5" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(dbplyr)</span>
<span id="cb7-6"><a href="connectToODS.html#cb7-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb7-7"><a href="connectToODS.html#cb7-7" aria-hidden="true" tabindex="-1"></a><span class="co"># &quot;DBI method&quot; required packages</span></span>
<span id="cb7-8"><a href="connectToODS.html#cb7-8" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(odbc)</span>
<span id="cb7-9"><a href="connectToODS.html#cb7-9" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(DBI)</span></code></pre></div>
<div id="odsprod-vs-odstest" class="section level4" number="2.2.2.1">
<h4><span class="header-section-number">2.2.2.1</span> ODSprod vs ODStest</h4>
<p>There are two ODS environments for you to be aware of: ODS (production or prod, DEQ-SQLODS-PROD) and ODStest <strong>(DEQ-SQLODS-TEST)</strong>. The ODS environment is the “production” environment that offers data views as they are stored in CEDS. The ODStest environment is a testing environment (sandbox) that is used for testing data architecture and database functions and may not always contain data meant for querying for business applications. <strong>Which should you connect to?</strong> If you are querying data for business applications, reports, etc. you must ensure you are connected to the ODS production environment. If you are learning how to use databases, building test queries, or generally exploring, use the ODStest environment.</p>
<p><strong>It is the responsibility of each data analyst to know which data source they are connected to while querying data and the implications of data sources on resultant data.</strong></p>
</div>
</div>
<div id="dbi-method-for-ods-connection" class="section level3" number="2.2.3">
<h3><span class="header-section-number">2.2.3</span> DBI Method for ODS Connection</h3>
<p>The most basic way of connecting to a database uses the odbc and DBI R packages.</p>
<div class="sourceCode" id="cb8"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb8-1"><a href="connectToODS.html#cb8-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(odbc)</span>
<span id="cb8-2"><a href="connectToODS.html#cb8-2" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(DBI)</span></code></pre></div>
<p>We connect to a database by establishing a connection object with a very specific connection string.</p>
<p>There are a few things to note in this connection string:
1. The driver method used is the ODBC driver from the odbc R package
2. The driver version is unique to your computer. You must input the exact ODBC driver software version you have installed on your machine. Examples of drivers that work with ODS are “ODBC Driver 12 for SQL Server,” “ODBC Driver 11 for SQL Server,” and “SQL Server Native Client 11.0”
3. The server argument specifies the server name (DEQ-SQLODS-PROD) and port (50000) that you are using for the connection
4. The database argument specifies which database you wish to connect to (ODS)
5. The trusted_connection argument must always be “yes”</p>
<div class="sourceCode" id="cb9"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb9-1"><a href="connectToODS.html#cb9-1" aria-hidden="true" tabindex="-1"></a>con <span class="ot">&lt;-</span> <span class="fu">dbConnect</span>(odbc<span class="sc">::</span><span class="fu">odbc</span>(), </span>
<span id="cb9-2"><a href="connectToODS.html#cb9-2" aria-hidden="true" tabindex="-1"></a>                 <span class="at">.connection_string =</span> <span class="st">&quot;driver={ODBC Driver 11 for SQL Server};server={DEQ-SQLODS-PROD,50000};database={ODS};trusted_connection=yes&quot;</span>)</span></code></pre></div>
<p>The above script establishes a database connection named “con” in your environment. This connection will be passed into other query strings to query the database, requiring an open database connection each time you query the database.</p>
<p>To test the connection, we will query an entire data view that is small from the WQM area of ODS. We use SQL to tell ODS to select everything from the Edas_Benthic_Master_Taxa_View data view. Note that we must provide the querying function the con connection string we established above.</p>
<div class="sourceCode" id="cb10"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb10-1"><a href="connectToODS.html#cb10-1" aria-hidden="true" tabindex="-1"></a>masterTaxaGenus <span class="ot">&lt;-</span> <span class="fu">dbGetQuery</span>(con,  <span class="st">&quot;SELECT * FROM wqm.Edas_Benthic_Master_Taxa_View&quot;</span>)</span>
<span id="cb10-2"><a href="connectToODS.html#cb10-2" aria-hidden="true" tabindex="-1"></a><span class="fu">head</span>(masterTaxaGenus)</span></code></pre></div>
<pre><code>## # A tibble: 6 x 19
##   Phylum Class Subclass Order Suborder Superfamily Family Subfamily Tribe Genus
##   &lt;chr&gt;  &lt;chr&gt; &lt;chr&gt;    &lt;chr&gt; &lt;chr&gt;    &lt;chr&gt;       &lt;chr&gt;  &lt;chr&gt;     &lt;chr&gt; &lt;chr&gt;
## 1 Arthr~ Inse~ &lt;NA&gt;     Dipt~ &lt;NA&gt;     &lt;NA&gt;        Culic~ &lt;NA&gt;      &lt;NA&gt;  Aedes
## 2 Arthr~ Inse~ &lt;NA&gt;     Odon~ Anisopt~ &lt;NA&gt;        Aeshn~ &lt;NA&gt;      &lt;NA&gt;  Aesh~
## 3 Arthr~ Inse~ &lt;NA&gt;     Cole~ &lt;NA&gt;     &lt;NA&gt;        Dytis~ Agabinae  Agab~ Agab~
## 4 Arthr~ Inse~ &lt;NA&gt;     Tric~ &lt;NA&gt;     &lt;NA&gt;        Gloss~ Agapetin~ &lt;NA&gt;  Agap~
## 5 Arthr~ Inse~ &lt;NA&gt;     Tric~ &lt;NA&gt;     &lt;NA&gt;        Seric~ &lt;NA&gt;      &lt;NA&gt;  Agar~
## 6 Arthr~ Inse~ &lt;NA&gt;     Plec~ &lt;NA&gt;     &lt;NA&gt;        Perli~ Perlinae  Perl~ Agne~
## # ... with 9 more variables: Species &lt;chr&gt;, `Final VA Family ID` &lt;chr&gt;,
## #   FinalID &lt;chr&gt;, TolVal &lt;dbl&gt;, FFG &lt;chr&gt;, Habit &lt;chr&gt;, FamFFG &lt;chr&gt;,
## #   FamTolVal &lt;dbl&gt;, FamHabit &lt;chr&gt;</code></pre>
<p>We can use this DBI method to send SQL statements directly to the database. SQL will not be covered in this section, please see <a href="https://www.datacamp.com/courses/introduction-to-sql">DataCamp Introduction to SQL course</a> for a basic primer on the SQL language.</p>
<div class="sourceCode" id="cb12"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb12-1"><a href="connectToODS.html#cb12-1" aria-hidden="true" tabindex="-1"></a><span class="fu">dbGetQuery</span>(con,  <span class="st">&quot;SELECT TOP 10 * FROM wqm.WQM_Stations_View&quot;</span>)</span></code></pre></div>
<pre><code>## # A tibble: 10 x 103
##    Sta_Id Sta_Desc Sta_Cbp_Name Sta_Fic_County Sta_Fic_State Sta_Rec_Code
##    &lt;chr&gt;  &lt;chr&gt;    &lt;chr&gt;        &lt;chr&gt;          &lt;chr&gt;         &lt;chr&gt;       
##  1 2-WPK~ Winterp~ &lt;NA&gt;         041            51            Piedmont    
##  2 2-WPK~ Winterp~ &lt;NA&gt;         041            51            Piedmont    
##  3 2-XVE~ UT to W~ &lt;NA&gt;         041            51            Piedmont    
##  4 2-WPK~ Winterp~ &lt;NA&gt;         041            51            Piedmont    
##  5 2-WPK~ Winterp~ &lt;NA&gt;         041            51            Piedmont    
##  6 2-XVF~ UT to W~ &lt;NA&gt;         041            51            Piedmont    
##  7 2-WPK~ UT to W~ &lt;NA&gt;         041            51            Piedmont    
##  8 2-XVG~ UT to W~ &lt;NA&gt;         041            51            Piedmont    
##  9 2-WPK~ Winterp~ &lt;NA&gt;         041            51            Piedmont    
## 10 2-XVJ~ UT to W~ &lt;NA&gt;         041            51            Piedmont    
## # ... with 97 more variables: Admin_Region &lt;chr&gt;, Sta_Lat_Deg &lt;dbl&gt;,
## #   Sta_Lat_Min &lt;dbl&gt;, Sta_Lat_Sec &lt;dbl&gt;, Sta_Long_Deg &lt;dbl&gt;,
## #   Sta_Long_Min &lt;dbl&gt;, Sta_Long_Sec &lt;dbl&gt;, Sta_Lv1_Code &lt;chr&gt;,
## #   Lv1_Description &lt;chr&gt;, Sta_Lv2_Code &lt;chr&gt;, Lv2_Description &lt;chr&gt;,
## #   Sta_Lv3_Code &lt;chr&gt;, Lv3_Description &lt;chr&gt;, Sta_Lv4_Code &lt;chr&gt;,
## #   Lv4_Description &lt;chr&gt;, Sta_Lv5_Code &lt;chr&gt;, Lv5_Description &lt;chr&gt;,
## #   Sta_Stream_Section &lt;chr&gt;, Sta_Stream_Name &lt;chr&gt;, Sta_Huc_Code &lt;chr&gt;,
## #   Sta_Huc_Sbc_Bsc_Code &lt;chr&gt;, Sta_Huc_Sbc_Code &lt;chr&gt;, Sta_Wsh_Code &lt;chr&gt;,
## #   Sta_Toc_Map_Num &lt;chr&gt;, Sta_Sampling_Frequency &lt;chr&gt;, Sfc_Desc &lt;chr&gt;,
## #   Sta_First_Sample_Date &lt;dttm&gt;, Sta_Last_Sample_Date &lt;dttm&gt;,
## #   Sta_Size_Sampling_Area &lt;chr&gt;, Sta_Size_Sampling_Area_Unit &lt;chr&gt;,
## #   Sau_Desc &lt;chr&gt;, Sta_Straher_Order &lt;chr&gt;, Sta_Shreve_Order &lt;chr&gt;,
## #   Sta_Wadable &lt;chr&gt;, Sta_Tod_Code &lt;chr&gt;, Sta_Tbc_Code &lt;chr&gt;,
## #   Sta_305B_Code &lt;chr&gt;, Sta_Water_Quality_Standards &lt;chr&gt;, Wqs_Desc &lt;chr&gt;,
## #   Sta_Salinity_Area_Type &lt;chr&gt;, Sat_Desc &lt;chr&gt;,
## #   Sta_Habitat_Descriptors &lt;chr&gt;, Sta_Comment &lt;chr&gt;, Sta_Storet_Bound &lt;chr&gt;,
## #   Sta_Stored_Storet_Date &lt;dttm&gt;, Sta_Inserted_Date &lt;dttm&gt;,
## #   Sta_Inserted_By &lt;chr&gt;, Sta_Changed_Date &lt;dttm&gt;, Sta_Changed_By &lt;chr&gt;,
## #   Rep_Timestamp &lt;dttm&gt;, Sta_Str_Stream_Code &lt;chr&gt;,
## #   Sta_Wqm_Wat_Shed_Code &lt;chr&gt;, Sta_Num_Of_Visits &lt;dbl&gt;, Sta_Type &lt;chr&gt;,
## #   Sta_Old_Id &lt;chr&gt;, Sta_Fi_Permit_Id &lt;chr&gt;, Sta_Fi_Outfall_No &lt;chr&gt;,
## #   Sta_Fi_Type &lt;chr&gt;, Sta_River_Mile &lt;chr&gt;, Sta_Milepoint_On &lt;chr&gt;,
## #   Sta_His_Data_Revw_Flag &lt;chr&gt;, Sta_His_Data_Revw_Note &lt;chr&gt;,
## #   Sta_Spa_Dist_Flag &lt;chr&gt;, Sta_Spa_Dist_Note &lt;chr&gt;, Sta_Spec_Prob_Flag &lt;chr&gt;,
## #   Sta_Spec_Prob_Note &lt;chr&gt;, Sta_Maj_Tributary_Flag &lt;chr&gt;,
## #   Sta_Maj_Tributary_Note &lt;chr&gt;, Sta_Maj_Fish_Flag &lt;chr&gt;,
## #   Sta_Maj_Fish_Note &lt;chr&gt;, Sta_Ext_Recomm_Flag &lt;chr&gt;,
## #   Sta_Ext_Recomm_Note &lt;chr&gt;, Sta_Source_Scale &lt;dbl&gt;, Sta_Hmv &lt;chr&gt;,
## #   Sta_Hmuc &lt;chr&gt;, Sta_Hcm &lt;chr&gt;, Hcm_Short_Desc &lt;chr&gt;, Hcm_Full_Desc &lt;chr&gt;,
## #   Sta_Hcrs &lt;chr&gt;, Hcrs_Short_Desc &lt;chr&gt;, Hcrs_Full_Desc &lt;chr&gt;, Sta_Vmv &lt;chr&gt;,
## #   Sta_Vmuc &lt;chr&gt;, Sta_Vcm &lt;chr&gt;, Vcm_Desc &lt;chr&gt;, Sta_Vcrs &lt;chr&gt;,
## #   Vcrs_Short_Desc &lt;chr&gt;, Vcrs_Full_Desc &lt;chr&gt;, Sta_Country &lt;chr&gt;,
## #   Country_Desc &lt;chr&gt;, Sta_Mlt &lt;chr&gt;, Mlt_Description &lt;chr&gt;,
## #   Sd_First_Sample_Date &lt;dttm&gt;, Sd_Last_Sample_Date &lt;dttm&gt;,
## #   Sd_Num_Visits &lt;dbl&gt;, Loaded_Date &lt;dttm&gt;, Loaded_By &lt;chr&gt;</code></pre>
</div>
<div id="pool-method-for-ods-connection" class="section level3" number="2.2.4">
<h3><span class="header-section-number">2.2.4</span> Pool Method for ODS Connection</h3>
<p>Generally speaking, the pool method is preferred for most business practices, especially any dynamic content (e.g. shiny apps). The <a href="https://db.rstudio.com/r-packages/pool/">pool package</a> creates a connection to a specified database, even if the database connection is temporarily lost or idle for a period of time. The instability of connecting to ODS of VPN makes the pool package especially useful for DEQ business practices. The concepts of open database connections are important when interacting with databases, read more on this topic <a href="https://db.rstudio.com/r-packages/pool/">here</a>. The “pool method” requires the pool and dbplyr R packages to be loaded into the user environment.</p>
<div class="sourceCode" id="cb14"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb14-1"><a href="connectToODS.html#cb14-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(pool)</span>
<span id="cb14-2"><a href="connectToODS.html#cb14-2" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(dbplyr)</span></code></pre></div>
<p>To connect to a database, you must establish a pool object. This object stores your connection information and may easily be piped into query requests. You may name your pool object anything you want, but most programmers name it “pool” by convention to ease the transfer of scripts from one project/programmer to the next.</p>
<p>There are a few things to note in this connection string:
1. The driver method used is the ODBC driver from the odbc R package
2. The specific Driver version is unique to your computer. You must input the exact ODBC driver software version you have installed on your machine. Examples of drivers that work with ODS are “ODBC Driver 12 for SQL Server,” “ODBC Driver 11 for SQL Server,” and “SQL Server Native Client 11.0”
3. The Server argument specifies the server name and port (50000) you are using for the connection
4. The dbname argument specifies which database you wish to connect to (ODS)
5. The trusted_connection argument must always be “yes”</p>
<div class="sourceCode" id="cb15"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb15-1"><a href="connectToODS.html#cb15-1" aria-hidden="true" tabindex="-1"></a>pool <span class="ot">&lt;-</span> <span class="fu">dbPool</span>(</span>
<span id="cb15-2"><a href="connectToODS.html#cb15-2" aria-hidden="true" tabindex="-1"></a>  <span class="at">drv =</span> odbc<span class="sc">::</span><span class="fu">odbc</span>(), <span class="co"># (1)</span></span>
<span id="cb15-3"><a href="connectToODS.html#cb15-3" aria-hidden="true" tabindex="-1"></a>  <span class="at">Driver =</span> <span class="st">&quot;ODBC Driver 11 for SQL Server&quot;</span>, <span class="co"># (2)</span></span>
<span id="cb15-4"><a href="connectToODS.html#cb15-4" aria-hidden="true" tabindex="-1"></a>  <span class="at">Server=</span> <span class="st">&quot;DEQ-SQLODS-PROD,50000&quot;</span>, <span class="co"># (3)</span></span>
<span id="cb15-5"><a href="connectToODS.html#cb15-5" aria-hidden="true" tabindex="-1"></a>  <span class="at">dbname =</span> <span class="st">&quot;ODS&quot;</span>, <span class="co"># (4)</span></span>
<span id="cb15-6"><a href="connectToODS.html#cb15-6" aria-hidden="true" tabindex="-1"></a>  <span class="at">trusted_connection =</span> <span class="st">&quot;yes&quot;</span> <span class="co"># (5)</span></span>
<span id="cb15-7"><a href="connectToODS.html#cb15-7" aria-hidden="true" tabindex="-1"></a>)</span></code></pre></div>
<p>After running the above chunk, you should have a list object named pool in your environment. We will use this object to build a minimal query to test our local connection to the ODS production environment.</p>
</div>
<div id="pool-method-query-data" class="section level3" number="2.2.5">
<h3><span class="header-section-number">2.2.5</span> Pool Method: Query Data</h3>
<p>Once a pool object is created, you may test it by querying the database. The below example is a good test of querying an entire data view in ODS and bringing that information back into your local environment because the view is relatively small. If you successfully bring back the benthic macroinvertebrate master taxa list, then you have successfully connected to ODS.</p>
<div class="sourceCode" id="cb16"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb16-1"><a href="connectToODS.html#cb16-1" aria-hidden="true" tabindex="-1"></a>masterTaxaGenus <span class="ot">&lt;-</span> pool <span class="sc">%&gt;%</span> <span class="fu">tbl</span>(<span class="fu">in_schema</span>(<span class="st">&quot;wqm&quot;</span>,  <span class="st">&quot;Edas_Benthic_Master_Taxa_View&quot;</span>)) <span class="sc">%&gt;%</span></span>
<span id="cb16-2"><a href="connectToODS.html#cb16-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">as_tibble</span>()</span>
<span id="cb16-3"><a href="connectToODS.html#cb16-3" aria-hidden="true" tabindex="-1"></a><span class="fu">head</span>(masterTaxaGenus)</span></code></pre></div>
<pre><code>## # A tibble: 6 x 19
##   Phylum Class Subclass Order Suborder Superfamily Family Subfamily Tribe Genus
##   &lt;chr&gt;  &lt;chr&gt; &lt;chr&gt;    &lt;chr&gt; &lt;chr&gt;    &lt;chr&gt;       &lt;chr&gt;  &lt;chr&gt;     &lt;chr&gt; &lt;chr&gt;
## 1 Arthr~ Inse~ &lt;NA&gt;     Dipt~ &lt;NA&gt;     &lt;NA&gt;        Culic~ &lt;NA&gt;      &lt;NA&gt;  Aedes
## 2 Arthr~ Inse~ &lt;NA&gt;     Odon~ Anisopt~ &lt;NA&gt;        Aeshn~ &lt;NA&gt;      &lt;NA&gt;  Aesh~
## 3 Arthr~ Inse~ &lt;NA&gt;     Cole~ &lt;NA&gt;     &lt;NA&gt;        Dytis~ Agabinae  Agab~ Agab~
## 4 Arthr~ Inse~ &lt;NA&gt;     Tric~ &lt;NA&gt;     &lt;NA&gt;        Gloss~ Agapetin~ &lt;NA&gt;  Agap~
## 5 Arthr~ Inse~ &lt;NA&gt;     Tric~ &lt;NA&gt;     &lt;NA&gt;        Seric~ &lt;NA&gt;      &lt;NA&gt;  Agar~
## 6 Arthr~ Inse~ &lt;NA&gt;     Plec~ &lt;NA&gt;     &lt;NA&gt;        Perli~ Perlinae  Perl~ Agne~
## # ... with 9 more variables: Species &lt;chr&gt;, `Final VA Family ID` &lt;chr&gt;,
## #   FinalID &lt;chr&gt;, TolVal &lt;dbl&gt;, FFG &lt;chr&gt;, Habit &lt;chr&gt;, FamFFG &lt;chr&gt;,
## #   FamTolVal &lt;dbl&gt;, FamHabit &lt;chr&gt;</code></pre>
<p>A few notes on querying using the pool method. The data schema are very important for ensuring the query runs successfully. In the above example, we are querying the data view entitled “Edas_Benthic_Master_Taxa_View” that lies inside the “wqm” area of ODS. Depending on your data needs (and information specified in your <a href="https://deqnet.deq.virginia.gov/programs/admin/ois/forms/documents/Special_Network_Access_Request_Form.pdf">Special Network Access Form</a>), you will be granted access to specific areas on the ODS environment. Water Quality Monitoring information is stored in the “wqm” area, Water Quality Assessment data is stored in the “wqa” area, TMDL data is stored in the “TMDL” area, etc. If you do not have access to the above area in ODS, then the above script will not work for you.</p>
<p>The pool method allows for more complex queries to be piped into a single call. This is very powerful because it allows you to use simple dplyr verbs (through the dbplyr package) to force the database to perform these operations instead of bringing a lot of data into your environment for local filtering and manipulation operations. More on this concept will be covered in <a href="queryDataFromODS.html#queryDataFromODS">Querying Data from ODS</a> but the importance of this cannot be understated. <strong>It is always more efficient to have the database perform querying operations to minimize the amount of data sent to your local R environment.</strong></p>
</div>
</div>
            </section>

          </div>
        </div>
      </div>
<a href="connectToConnectPins.html" class="navigation navigation-prev " aria-label="Previous page"><i class="fa fa-angle-left"></i></a>
<a href="queryDataFromODS.html" class="navigation navigation-next " aria-label="Next page"><i class="fa fa-angle-right"></i></a>
    </div>
  </div>
<script src="libs/gitbook-2.6.7/js/app.min.js"></script>
<script src="libs/gitbook-2.6.7/js/lunr.js"></script>
<script src="libs/gitbook-2.6.7/js/clipboard.min.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-search.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-sharing.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-fontsettings.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-bookdown.js"></script>
<script src="libs/gitbook-2.6.7/js/jquery.highlight.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-clipboard.js"></script>
<script>
gitbook.require(["gitbook"], function(gitbook) {
gitbook.start({
"sharing": {
"github": false,
"facebook": false,
"twitter": false,
"linkedin": false,
"weibo": false,
"instapaper": false,
"vk": false,
"all": null
},
"fontsettings": {
"theme": "white",
"family": "sans",
"size": 2
},
"edit": null,
"history": {
"link": null,
"text": null
},
"view": {
"link": null,
"text": null
},
"download": ["series.pdf"],
"toc": {
"collapse": "subsection"
}
});
});
</script>

</body>

</html>
